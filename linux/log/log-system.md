# log system

<!-- vim-markdown-toc GFM -->

* [rsyslog](#rsyslog)
    * [remote-log](#remote-log)
* [python log](#python-log)
* [whole-project](#whole-project)

<!-- vim-markdown-toc -->

## rsyslog

### remote-log

```python
# coding=utf-8

import logging
import logging.handlers
import socket

logger = logging.getLogger('MyLog')
logger.setLevel(logging.DEBUG)
formatter = logging.Formatter('Python: { "loggerName":"%(name)s", "timestamp":"%(asctime)s", "pathName":"%(pathname)s", "logRecordCreationTime":"%(created)f", "functionName":"%(funcName)s", "levelNo":"%(levelno)s", "lineNo":"%(lineno)d", "time":"%(msecs)d", "levelName":"%(levelname)s", "message":"%(message)s"}')
handler = logging.handlers.SysLogHandler(address=('test1', 514), socktype=socket.SOCK_STREAM)
handler.formatter = formatter
logger.addHandler(handler)
logger.error('remote_tcp')
```

## python log
[Empty logging with Django, Nginx, Gunicorn and supervisor - Stack Overflow](https://stackoverflow.com/questions/34868713/empty-logging-with-django-nginx-gunicorn-and-supervisor)


I think it is good to understand all the components and what they are actually logging.

- nginx - access.log

This will will log any request that comes to nginx, irrespective of the nature or kind of request.

- nginx - error.log

This will log errors that come from any backend ("upstream" in nginx language) servers that you have configured; if they are not handling these errors. In other words, if the upstream server has no logging configured and is sending all logs to stderr - it will finally be caught and logged in error.log.

- supervisor - stdout_logfile setting

The file mentioned here logs any messages generated by supervisor when starting this entry.

- supervisor - stderr_logfile setting

If supervisor faces an error launching the process configured, it is logged here.

- gunicorn

gunicorn has two error loggers gunicorn.error and gunicorn.access which will log any error or stdout/access messages for the application being run under gunicorn.

- django logging

This is the first place error messages are generated and then "moved up the chain".

So as error are generated at each level of your stack, they are either handled by that component, or simply passed through to the next component up until in the end, if nothing catches the error messages, they may be caught by the global OS error logger or - in most cases - silently discarded.

The reason in your app your errors are not doing what they should is because you have disabled all other loggers in your django configuration with 'disable_existing_loggers': True,.

This also disabled gunicorn.error and gunicorn.access - your error logs are now being discarded as they are actually being handled by gunicorn, but the loggers are disabled by your django configuration.

Simply add the appropriate configuration for those two loggers to your settings.py, or set disable_existing_loggers to False and then restart the gunicorn process and everything should work.

## whole-project
[Django + Gunicorn + Supervisor + Nginx \\| Rakibul Islam](https://rakibul.net/django-gunicorn-supervisor-nginx)
