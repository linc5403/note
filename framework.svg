<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="649px" preserveAspectRatio="none" style="width:679px;height:649px;" version="1.1" viewBox="0 0 679 649" width="679px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kpciksy3ihmz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[8ba6038be8c2da7b3b6ab6ef401c3a67]
cluster North Interface--><polygon fill="#FFFFFF" filter="url(#f1kpciksy3ihmz)" points="307,6.532,418,6.532,425,32.8039,662,32.8039,662,111.532,307,111.532,307,6.532" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="307" x2="425" y1="32.8039" y2="32.8039"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="311" y="24.7719">North Interface</text><!--MD5=[caf7b33d2456239656b9b59659f5698e]
cluster Kafka--><polygon fill="#FFFFFF" filter="url(#f1kpciksy3ihmz)" points="317,144.532,362,144.532,369,170.8039,483,170.8039,483,249.532,317,249.532,317,144.532" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="317" x2="369" y1="170.8039" y2="170.8039"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="321" y="162.7719">Kafka</text><!--MD5=[a2b32930d5e5737e92307d97d20af7ca]
cluster 数据接入层-Flink--><polygon fill="#FFFFFF" filter="url(#f1kpciksy3ihmz)" points="16,282.532,130,282.532,137,308.8039,512,308.8039,512,387.532,16,387.532,16,282.532" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="137" y1="308.8039" y2="308.8039"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="108" x="20" y="300.7719">数据接入层-Flink</text><!--MD5=[8ca05dcb2d722261f922cfe88f941f68]
entity RestController--><rect fill="#FEFECE" filter="url(#f1kpciksy3ihmz)" height="50.2719" style="stroke:#A80036;stroke-width:1.5;" width="134" x="512" y="45.532"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="626" y="50.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="624" y="52.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="624" y="56.532"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="527" y="81.7719">RestController</text><!--MD5=[0ac81c296a40a853e5f77722492c9b9b]
entity WebSocketServer--><rect fill="#FEFECE" filter="url(#f1kpciksy3ihmz)" height="50.2719" style="stroke:#A80036;stroke-width:1.5;" width="154" x="323" y="45.532"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="457" y="50.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="455" y="52.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="455" y="56.532"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="338" y="81.7719">WebSocketServer</text><!--MD5=[e29745d789d1cd237fb5892a53e7b9d1]
entity kafka--><rect fill="#FEFECE" filter="url(#f1kpciksy3ihmz)" height="50.2719" style="stroke:#A80036;stroke-width:1.5;" width="134" x="333" y="183.532"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="447" y="188.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="445" y="190.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="445" y="194.532"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="348" y="219.7719">Kafka消息总线</text><!--MD5=[24961a73861c29b46e5bfcaa3197143f]
entity sqlProcessor--><rect fill="#FEFECE" filter="url(#f1kpciksy3ihmz)" height="50.2719" style="stroke:#A80036;stroke-width:1.5;" width="122" x="201" y="321.532"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="303" y="326.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="301" y="328.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="301" y="332.532"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="216" y="357.7719">SQL数据处理</text><!--MD5=[935105ae04fe9df4f1b1eadbeee4326f]
entity redisProcessor--><rect fill="#FEFECE" filter="url(#f1kpciksy3ihmz)" height="50.2719" style="stroke:#A80036;stroke-width:1.5;" width="133" x="32.5" y="321.532"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="145.5" y="326.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="143.5" y="328.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="143.5" y="332.532"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="47.5" y="357.7719">Redis数据处理</text><!--MD5=[02e761bdc4d8c086a61bcb4c67140ff8]
entity kafkaProcessor--><rect fill="#FEFECE" filter="url(#f1kpciksy3ihmz)" height="50.2719" style="stroke:#A80036;stroke-width:1.5;" width="137" x="358.5" y="321.532"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="475.5" y="326.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="473.5" y="328.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="473.5" y="332.532"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="373.5" y="357.7719">Kafka 数据处理</text><!--MD5=[d5179284998f60e3c36d92a0c53c6df6]
entity sqlSource--><rect fill="#FEFECE" filter="url(#f1kpciksy3ihmz)" height="50.2719" style="stroke:#A80036;stroke-width:1.5;" width="94" x="239" y="585.532"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="313" y="590.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="311" y="592.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="311" y="596.532"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="254" y="621.7719">SQL数据</text><!--MD5=[e445b339a799c2b176cc8f808428315c]
entity redisSource--><rect fill="#FEFECE" filter="url(#f1kpciksy3ihmz)" height="50.2719" style="stroke:#A80036;stroke-width:1.5;" width="98" x="26" y="585.532"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="104" y="590.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="102" y="592.532"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="102" y="596.532"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="41" y="621.7719">Reid数据</text><!--MD5=[ec206886935d7594f15959c5fb94d092]
reverse link WebSocketServer to kafka--><path d="M400,100.622 C400,125.262 400,160.172 400,183.312 " fill="none" id="WebSocketServer-backto-kafka" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="400,95.532,396,104.532,400,100.532,404,104.532,400,95.532" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3555b73caef76c003b4789d9ab95100b]
reverse link sqlProcessor to sqlSource--><path d="M264.69,376.892 C269.47,429.122 279.37,537.202 283.79,585.412 " fill="none" id="sqlProcessor-backto-sqlSource" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="264.21,371.712,261.0509,381.0404,264.6678,376.691,269.0173,380.3079,264.21,371.712" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="281" y="457.112">compt2e8b85-source-1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="312.5" y="475.936">设备在线信息</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="287" y="494.76">comptbc19a5-source</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="312.5" y="513.584">设备位置信息</text><!--MD5=[d94b05c686331b915a1f9e619b8e3ead]
reverse link kafka to sqlProcessor--><path d="M372.03,237.092 C346.96,261.802 310.55,297.692 286.57,321.312 " fill="none" id="kafka-backto-sqlProcessor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="375.65,233.532,366.4224,236.9745,372.0789,237.0316,372.0218,242.6882,375.65,233.532" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[326d2bb29a002f2649b57941e507d590]
reverse link redisProcessor to redisSource--><path d="M92.48,376.882 C90.79,385.432 89.12,394.822 88,403.532 C79.55,468.922 76.53,546.732 75.5,585.332 " fill="none" id="redisProcessor-backto-redisSource" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="93.54,371.672,87.8436,379.7064,92.5539,376.5738,95.6865,381.2841,93.54,371.672" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="103" y="419.612">comptbc19a5-source-1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="147.5" y="438.436">设备省份</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="104" y="457.26">compt7d8f5b-source-1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="89" y="476.084">统计闸门夹紧事件的历史趋势</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="103.5" y="494.9081">compt9a964e-source-1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="121.5" y="513.7321">设备注册历史统计</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="103" y="532.5561">compta59b41-source-1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="121.5" y="551.3801">设备告警相关趋势</text><!--MD5=[d5e2aee8581c3368c93283f80d14026f]
reverse link kafka to redisProcessor--><path d="M327.67,223.352 C284.02,233.562 228.29,250.002 183,274.532 C160.17,286.902 137.89,306.162 122.02,321.512 " fill="none" id="kafka-backto-redisProcessor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="332.66,222.202,322.9894,220.3364,327.789,223.3305,324.795,228.13,332.66,222.202" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bb18a48c0fca7792bbe106f0027f0c9f]
link kafka to kafkaProcessor--><path d="M394.77,233.532 C395.93,256.692 402.68,291.792 410.57,316.512 " fill="none" id="kafka-to-kafkaProcessor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="412.16,321.312,413.0998,311.5081,410.5746,316.57,405.5126,314.0447,412.16,321.312" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c6fbe1dcff5d8d86b16036643a0b9fb2]
reverse link kafka to kafkaProcessor--><path d="M416.98,238.322 C425.06,262.972 431.81,298.072 432.81,321.312 " fill="none" id="kafka-backto-kafkaProcessor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="415.35,233.532,414.4722,243.3416,416.9654,238.2638,422.0432,240.757,415.35,233.532" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1461662f9c86441607106f1888cf32ce]
@startuml
package "North Interface" {
	[RestController]
	[WebSocketServer]
}

package "Kafka" {
	[Kafka消息总线] as kafka
	[WebSocketServer] <- - kafka
}

package "数据接入层-Flink" {
	[SQL数据处理] as sqlProcessor
	[Redis数据处理] as redisProcessor
	[Kafka 数据处理] as kafkaProcessor
}


Component [SQL数据] as sqlSource
Component [Reid数据] as redisSource

sqlSource -up-> sqlProcessor:"compt2e8b85-source-1\n设备在线信息\ncomptbc19a5-source\n设备位置信息"
sqlProcessor -up-> kafka

redisSource -up-> redisProcessor:"comptbc19a5-source-1\n设备省份\ncompt7d8f5b-source-1\n统计闸门夹紧事件的历史趋势\ncompt9a964e-source-1\n设备注册历史统计\ncompta59b41-source-1\n设备告警相关趋势"
redisProcessor -up-> kafka

kafka - -> kafkaProcessor

kafkaProcessor -up-> kafka

@enduml

PlantUML version 1.2021.01(Tue Feb 02 15:55:08 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>